<div class="profile-container" *ngIf="!loading && pet; else loadingTemplate">
  <div class="profile-card">
    <img class="pet-photo" [src]="defaultImage" alt="Foto de {{ pet.name }}">
    
    <div class="profile-details">
      <h2>{{ pet.name }}</h2>
      <p><strong>Tipo:</strong> {{ pet.animalType }}</p>
      <p><strong>Raza:</strong> {{ pet.breed }}</p>
      <p><strong>Edad:</strong> {{ pet.age }}</p>
      <p><strong>Comportamiento:</strong> {{ pet.behavior }}</p>
      <a class="medical-link" [href]="pet.medicalFilePath" target="_blank">Ver archivo médico</a>

      <div *ngIf="!pet.sponsor" class="qr-box">
        <h3>¡Apadrina a {{ pet.name }}!</h3>
        <div *ngIf="qrCodeImage" class="qr-image">
          <img [src]="qrCodeImage" alt="Código QR de apadrinamiento" />
        </div>
        <button class="sponsor-button" (click)="asignarPadrino()" [disabled]="asignando">
          {{ asignando ? 'Procesando...' : 'Apadrinar ahora' }}
        </button>
      </div>
    </div>
  </div>

  <div class="shelter-info" *ngIf="shelter">
    <h3>Refugio</h3>
    <p><strong>Nombre:</strong> {{ shelter.shelterName }}</p>
    <p><strong>Dirección:</strong> {{ shelter.shelterAddress }}</p>
    <p><strong>Teléfono:</strong> {{ shelter.phone }}</p>
  </div>

  <div class="sponsor-info" *ngIf="pet?.sponsor">
    <h3>Padrino</h3>
    <p><strong>Nombre:</strong> {{ pet.sponsor.name }}</p>
    <p><strong>Correo:</strong> {{ pet.sponsor.email }}</p>
  </div>
</div>

<ng-template #loadingTemplate>
  <div class="loading">
    <p>Cargando perfil...</p>
  </div>
</ng-template>
